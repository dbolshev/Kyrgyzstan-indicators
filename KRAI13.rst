######################################################################################################################################################
KRAI13. Закупающая организация использует метод "конкурс упрощенным методом" с превышением установленных законом максимальной пороговой суммы. 
######################################################################################################################################################

***************
Суть индикатора
***************

Индикатор отслеживает случаи, когда закупающая организация использует процедуру закупки упрощенным методом, но превышает допустимые для этого типа закупки пороги.

****
Риск
****

Неверное определение метода закупки.


*******************************
Нарушение норм/принципов закона
*******************************

Статья 19. Конкурс упрощенным методом. П. 1. Конкурс упрощенным методом используется в случае осуществления закупок готовых товаров, не требующих специального изготовления, работ и услуг с конкретным описанием на сумму менее максимальной пороговой суммы.

***********************************
Основание для разработки индикатора
***********************************

Индикатор вводится, так как в системе не реализован контроль превышения порога закупки.

******************************
Методология расчета индикатора
******************************

Уровень расчета
===============
Индикатор рассчитывается на уровне *процедуры*.

Источники данных для расчета
============================

Для расчета индикатора используются следующие источники данных:

- API системы государственных закупок в OCDS формате
- Транзакционна переменная :ref:`tv_badDataQuality`

Типы процедур
=============

Индикатор рассчитывается для следующих типов процедур:

- упрощенный метод закупки.


Статусы процедур
----------------

Индикатор рассчитывается для процедур, которые:

- находятся в статусе ``contractSigned``
- находятся в статусе ``active`` c ``currentStage = 'evaluationComplete'`` более 30 дней (количество дней вычисляется, как количество дней от текущей даты до самой ранней даты из объектов ``data.awards``).


Частота расчета
===============

Если выполнены все условия для активации расчета индикатор, он рассчитывается один раз.

Качество данных
===============

Если значение переменной :ref:`tv_badDataQuality` для данной процедуры равно ``true``, индикатор принимает значение ``-1`` и расчет его не производится.

Поля для расчета
================

Для расчета индикатора используются следующие поля API модуля системы гос. закупок:

- ``data.tender.value.amount``
- ``parties.identifier.id``
- ``parties.identifier.scheme``
- ``parties.roles``


Формула расчета
===============

1. Находим идентификатор закупающей организации (конкатенация ``parties.identifier.id`` и ``parties.identifier.scheme``), таких что ``parties.roles = 'buyer, procuringEntity'``.

2. По идентификатору определяем порог, который должен применяться к данной организации. (???)

3. Сравниваем сумму процедуры ``data.tender.value.amount`` с пороговой. Если сумма закупки больше пороговой, идентификатор принимает значение ``1``. В противном случае, идентификатор принимает значение ``0``.

Факторы, которые влияют на корректное срабатывание индикатора
=============================================================

Индикатор может срабатывать неправильно, если код предмета закупки, указанный закупающей организацией не детализирован достаточно для точной идентификации предмета закупки.
