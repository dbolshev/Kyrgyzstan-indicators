######################################################################################################################################################
KRAI30. Один участник выиграл все лоты в многолотовой (5+) процедуре, где были дисквалификации.
######################################################################################################################################################

***************
Суть индикатора
***************

Индикатор отслеживает случаи, когда все лоты многолотовой процедуры выиграл один поставщик, причем в состоявшихся лотах была хоть одна дисквалификация.

****
Риск
****

Риск сговора между представителями закупающей организации и участником конкурса. 


*******************************
Нарушение норм/принципов закона
*******************************

"Статья 1, п.2
- создания равных и справедливых условий для поставщиков (подрядчиков) при осуществлении государственных закупок."


***********************************
Основание для разработки индикатора
***********************************

Индикатор вводится так как в системе не отслеживается количество выигранных лотов одним поставщиком.

******************************
Методология расчета индикатора
******************************

Уровень расчета
===============
Индикатор расчитывается на уровне *процедуры*.

Источники данных для расчета
============================

Для расчета индикатора используются следующие источники данных:

- API системы государственных закупок в OCDS формате


Типи процедур
=============

Индикатор расчитывается для следующих типов процедур:

- одноэтапные процедуры;
- двухэтапные процедуры;
- процедуры упрощенным методом;
- процедуры методом на понижение цены.


Статусы процедур
----------------

Индикатор расчитывается для процедур, которые:

- находятся в статусе ``contractSigned``
- находятся в статусе ``evaluationComplete`` более 30 дней.

Частота расчета
===============

Если выполнены все условия для активации расчета индикатор, он расчитывается один раз.

Поля для расчета
================

Для расчета индикатора используются следующие поля API модуля системы гос. закупок:

- ``data.awards.status``
- ``data.awards.relatedBid``
- ``data.awards.relatedLot``
- ``data.lots.id``
- ``data.lots.status``

Формула расчета
===============

1. Выбираем все объекты определения победителя процедуры, которые есть в процедуре.
2. Если все объекты, которые имеют ``data.awards.status = 'active'`` или ``data.awards.status = 'pending'`` имеют одинаковый ``data.awards.relatedBid``, переходим на следующий шаг. В противном случае индикатор принимает значение ``0``, расчет заканчивается.
3. Если среди объектов определения процедуры есть объекты, которые имеют ``data.awards.status = 'disqualified'``, выбираем их идентификаторы - ``data.awards.relatedLot``. В противном случае индикатор принимает значение ``0``, расчет заканчивается.
4. Выбираем объекты лотов ``data.awards.relatedLot = data.lots.id`` и проверяем статусы этих лотов. Если хотя бы один из лотов имеет ``data.lots.status = 'complete'`` или ``data.lots.status = 'active'``, индикатор принимает значение ``1``, расчет заканчивается.
5. Если мы дошли до этого пункта, индикатор принимает значение ``0``.

Факторы, которые влияют на корректное срабатывание индикатора
=============================================================

Индикатор может срабатывать неправильно, если закупающая организация не отображает на портале все фактически пройденные этапы процедуры закупки.