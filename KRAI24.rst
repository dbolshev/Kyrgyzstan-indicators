######################################################################################################################################################
KRAI24. Закупщик запросил слишком много квалификационных требований (больше чем в среднем по данному виду закупок) в добавок указал собственное требование (другое).
######################################################################################################################################################

***************
Суть индикатора
***************

Индикатор отслеживает случаи, когда закупающая организация запрашивает нетипично много для данного предмета закупки квалификационных требований к поставщику, где в частности указано требование "Другое".

****
Риск
****

Риск манипуляции с квалификационными требованиями для продвижения "своего" поставщика, либо признание закупки несостоявшейся для дальнейшего заключения прямого договора со "своим" поставщиком. 


*******************************
Нарушение норм/принципов закона
*******************************

Статья 1. Цель и принципы Закона. Нарушение принципов:  
 - Расширения участия и развития конкуренции между поставщиками (подрядчиками) в процессе осуществления закупок; 
 - Создания равных и справедливых условий для поставщиков (подрядчиков) при осуществлении государственных закупок. 
Статья 27. Квалификационные данные поставщиков (подрядчиков). 4. Закупающая организация не должна устанавливать критерии, требования или процедуры, представляющие собой дискриминацию поставщиков (подрядчиков).


***********************************
Основание для разработки индикатора
***********************************

Индикатор вводится, так как в системе не реализован контроль количества квалификационных требований к поставщику.

******************************
Методология расчета индикатора
******************************

Уровень расчета
===============
Индикатор рассчитывается на уровне *процедуры*.

Источники данных для расчета
============================

Для расчета индикатора используются следующие источники данных:

- API системы государственных закупок в OCDS формате
- Аналитическая таблица :ref:`tbl_CPVqualifRequir`
- Транзакционная переменная :ref:`tv_badDataQuality`

Типы процедур
=============

Индикатор рассчитывается для следующих типов процедур:

- одноэтапный метод;
- упрощенный метод;
- метод на понижение цены.


Статусы процедур
----------------

Индикатор рассчитывается для процедур, которые:

- находятся в статусе ``contractSigned``
- находятся в статусе ``active`` c ``currentStage = 'evaluationComplete'`` более 30 дней (количество дней вычисляется, как количество дней от текущей даты до самой ранней даты из объектов ``data.awards``).

Частота расчета
===============

Если выполнены все условия для активации расчета индикатор, он рассчитывается один раз.

Качество данных
===============

Если значение переменной :ref:`tv_badDataQuality` для данной процедуры равно ``true``, индикатор принимает значение ``-1`` и расчет его не производится.

Поля для расчета
================

Для расчета индикатора используются следующие поля API модуля системы гос. закупок:

- ``data.qualificationRequirements.id``
- ``data.qualificationRequirements.type``
- ``data.items.classification.id``
- ``data.items.classification.scheme``

Формула расчета
===============

1. Считаем количество элементов ``data.qualificationRequirements.id`` в процедуре.
2. Находим коды всех предметов закупки (конкатенация ``data.items.classification.scheme`` и ``data.items.classification.id``).
3. Для каждого предмета закупки в аналитической таблице находим среднее количество квалификационных требований.
4. Индикатор принимает значение ``1``, если хотя бы для одного из предметов закупки:
  - количество квалификационных требований в процедуре существенно (на 40% и более) выше, чем среднее.
  - хотя бы одно из требований имеет тип ``data.qualificationRequirements.type = 'Другое требование'``.
5. В ни для одного из предметов закупки не выполняются требования предыдущего пункта, индикатор принимает значение ``0``.

Факторы, которые влияют на корректное срабатывание индикатора
=============================================================

Индикатор может срабатывать неправильно, если закупающая организация не отображает на портале все фактически пройденные этапы процедуры закупки.
