##################################################################################################################
NEW2. Метод прямого договора по дозакупке товаров, услуг или работ ссылается на метод прямого заключения договора.
##################################################################################################################

***************
Суть индикатора
***************

Индикатор исследует случаи, когда закупающая организация неправомерно использует метод прямого заключения договора.

****
Риск
****
Неиспользование конкурсных закупок. 

*******************************
Нарушение норм/принципов закона
*******************************

Статья 

***********************************
Основание для разработки индикатора
***********************************

*******************************
Методология расчета индикатора.
*******************************

Уровень расчета
===============
Индикатор расcчитывается на уровне *конкурса*.

Источники данных для расчета
============================

Для расчета индикатора используются следующие источники данных:

- API системы государственных закупок в OCDS формате
- Транзакционная переменнная :ref:`tv_badDataQuality`

Типы конкурсов
==============

Индикатор рассчитывается для следующих типов конкурсов:

- метод прямого заключения договора.


Статусы конкурсов
-----------------

Индикатор расчитывается для процедур, которые:

- находятся в статусе ``published``


Частота расчета
===============

Если выполнены все условия для активации расчета индикатора, он рассчитывается один раз.

Поля для расчета
================

Для расчета индикатора используются следующие поля API модуля системы гос. закупок:

- ``data.tender.procurementMethodRationale``
- ``data.tender.procurementMethodDetails``
- ``data.tender.tenderNumber``
- ``data.relatedProcesses.tenderNumber``

Для расчета используются следующие транзакционные переменные:

- :ref:`tv_badDataQuality`

Качество данных
===============

Если значение переменной :ref:`tv_badDataQuality` для данной процедуры равно ``true``, индикатор принимает значение ``-1`` и расчет его не производится.

Формула расчета
===============

1. Выбираем только закупки, у которых ``data.tender.procurementMethodRationale='additionalProcurement5'``.

2. Выбираем номер конкурса, на который ссылается закупающая организация ``data.relatedProcesses.tenderNumber``.

3. Из найденного номера удаляем все символы, кроме цифр.

4. В системе госзакупок находим конкурс с таким номером ``data.tender.tenderNumber=data.relatedProcesses.tenderNumber``.

5. Если по номеру конкурс найти не удалось, индикатор принимает значение ``-1``, расчет заканчивается.

6. Если конкурс найден, то смотрим его тип ``data.tender.procurementMethodDetails``.

7. Если тип ``data.tender.procurementMethodDetails='singleSource'``б индикатор принимает значение ``1``, в противном случае - индикатор принимает значение ``0``.

Факторы, которые влияют на корректное срабатывание индикатора
=============================================================

Индикатор может срабатывать неправильнов случае, когда представитель закупающей организации неправильно ввел номер конкурса, на который ссылается в закупке или неправильно выбрал обоснование проведения закупки методом прямого заключения договора.
