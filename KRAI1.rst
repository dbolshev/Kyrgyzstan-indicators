######################################################################################################################################################
KRAI1. Повторная закупка методом прямого заключения договора на приобретения товаров, работ и услуг по каждой статье расходов один раз в год до минимальной пороговой суммы.
######################################################################################################################################################

***************
Суть индикатора
***************

Индикатор отслеживает случаи, когда закупающая организация проводит процедуру прямого закулючения договора с обоснованием "приобретения товаров, работ и услуг по каждой статье расходов один раз в год до минимальной пороговой суммы", но в текущем году данная закупающая организация уже проводила закупку методом прямого заключения договора по этой причине, покупая те же предметы закупки.

****
Риск
****
Избегание применения конкурсных процедур с целью заключения договора с "удобным" поставщиком. 

*******************************
Нарушение норм/принципов закона
*******************************

Статья 21. Закупки методом прямого заключения договора
Пункт4, подпункт 3. Приобретения товаров, работ и услуг по каждой статье расходов один раз в год до минимальной пороговой суммы

***********************************
Основание для разработки индикатора
***********************************

Свидетельствует о нарушении статьи 21 Закона Кыргызской Республики "О государственных закупках".
Индикатор вводится, так как в системе не реализован контроль количества закупок закупающей организации методом прямого заключения договора с одинаковым предметом закупки .

*******************************
Методология расчета индикатора.
*******************************

Уровень расчета
===============
Индикатор расчитывается на уровне *процедуры*.

Источники данных для расчета
============================

Для расчета индикатора используются следующие источники данных:

- API системы государственных закупок в OCDS формате
- Аналитическая таблица :ref:`tbl_reportOneTime`
- Транзакционная переменная :ref:`tv_tenderCPVList`

Типи процедур
=============

Индикатор расчитывается для следующих типов процедур:

- метод прямого заключения договора.


Статусы процедур
----------------

Индикатор расчитывается для процедур, которые:

- находятся в статусе ``contractSigned``
- находится более 30 дней в статусе ``bidsOpened``.


Частота расчета
===============

Если выполнены все условия для активации расчета индикатор, он расчитывается один раз.

Поля для расчета
================

Для расчета индикатора используются следующие поля API модуля системы гос. закупок:

- ``data.tender.procurementMethodRationale``
- ``data.tender.items.classification.scheme``
- ``data.tender.items.classification.id``
- ``parties.id``
- ``parties.roles``
- ``date``

Для расчета используются следующие транзакционные переменные:

- :ref:`tv_tenderCPVList`

Для расчета используются следующие аналитические таблицы:

- :ref:`tbl_reportOneTime`

Формула расчета
===============

1. Выбираем только процедуры, ``data.tender.procurementMethodRationale = 'PROC_ONCE_IN_A_YEAR'``.

2. Выбираем все значения классификаторов из текущей процедуры (конкатенация полей ``data.tender.items.classification.scheme`` и ``data.tender.items.classification.id``).

3. Выбираем идентификатор закупающей организации:  ``parties.id``, для которой ``parties.roles = 'buyer, procuringEntity'``.

4. По идентификатору закупающей организации в аналитической таблице находим список всех предметов закупок, которые уже закупались ранее (в поле ``date`` текущей процедуры стоит более поздняя дата, чем дата в строке таблицы) в этом году прямым заключением договора по причине "Приобретения товаров, работ и услуг по каждой статье расходов один раз в год до минимальной пороговой суммы".

5. Если хоть один предмет закупки из текущей процедуры находится в списке в аналитической таблице, индикатор принимает значение "1". В противном случае индикатор принимает значение "0".

Факторы, которые влияют на корректное срабатывание индикатора
=============================================================

Индикатор может срабатывать неправильно, если код предмета закупки, указанный закупающей организацией не детализирован достаточно для точной идентификации предмета закупки.
