######################################################################################################################################################
KRAI19. Объявление процедуры для закупки товаров, услуг и работ по классификатору ОКГЗ, одновременно с ранее объявленной аналогичной закупкой по которой еще не определена выигравшая конкурсная заявка. 
######################################################################################################################################################

***************
Суть индикатора
***************

Индикатор отслеживает случаи, когда закупающая организация проводит процедуру закупки предмета закупки, по которому в данный момент идет еще одна процедура закупки.

****
Риск
****

Решение по субъективным основаниям. Неэффективный процесс закупки.


*******************************
Нарушение норм/принципов закона
*******************************

Статья 1. Цель и принципы Закона. Нарушение принципов:  - Расширения участия и развития конкуренции между поставщиками (подрядчиками) в процессе осуществления закупок; 
 - Создания равных и справедливых условий для поставщиков (подрядчиков) при осуществлении государственных закупок.

***********************************
Основание для разработки индикатора
***********************************

Индикатор вводится, так как в системе не реализован контроль за закупкой закупающих организаций по повторяющемуся предмету закупки.

******************************
Методология расчета индикатора
******************************

Уровень расчета
===============
Индикатор рассчитывается на уровне *процедуры*.

Источники данных для расчета
============================

Для расчета индикатора используются следующие источники данных:

- API системы государственных закупок в OCDS формате
- Аналитическая таблица :ref:`tbl_activeCPV`
- Транзакционные переменные :ref:`tv_tenderCPVList`, :ref:`tv_badDataQuality`

Типы процедур
=============

Индикатор рассчитывается для следующих типов процедур:

- одноэтапный метод;
- упрощенный метод;
- метод на понижение цены.


Статусы процедур
----------------

Индикатор рассчитывается для процедур, которые:

- находятся в статусе ``complete``
- находятся в статусе ``active`` c ``currentStage = 'evaluationComplete'`` более 30 дней (количество дней вычисляется, как количество дней от текущей даты до самой ранней даты из объектов ``data.awards``).


Частота расчета
===============

Если выполнены все условия для активации расчета индикатор, он рассчитывается один раз.

Качество данных
===============

Если значение переменной :ref:`tv_badDataQuality` для данной процедуры равно ``true``, индикатор принимает значение ``-1`` и расчет его не производится.

Поля для расчета
================

Для расчета индикатора используются следующие поля API модуля системы гос. закупок:

- ``data.tender.datePublished``
- ``data.awards.status``
- ``data.awards.date``
- ``data.items.classification.id``
- ``data.items.classification.scheme``
- ``data.parties.roles``
- ``data.parties.identifier.scheme``
- ``data.parties.identifier.id``

Формула расчета
===============

1. Определяем идентификатор закупающей организации (конкатенация ``data.parties.identifier.scheme`` и ``data.parties.identifier.id``) элемента ``data.parties``, у которого ``data.parties.roles = 'buyer, procuringEntity'``.

2. Определяем дату публикации процедуры на портале ``data.tender.datePublished``.

3. Из аналитической таблицы выбираем все строки для нашей закупающей организации, где даты более ранние, чем дата публикации из пункта 2.

4. Сравниваем все найденные коды предметов закупок из таблицы на вхождение в транзакционную переменную :ref:`tenderCPVList` исследуемой процедуры.

5. Если хоть один код предмета закупки входит в транзакционную переменную, индикатор принимает значение ``1``. В противном случае, индикатор принимает значение ``0``. 


Факторы, которые влияют на корректное срабатывание индикатора
=============================================================

Индикатор может срабатывать неправильно, если закупающая организация не отображает на портале все фактически пройденные этапы процедуры закупки.
