.. _tbl_PEOpenTenders:

tbl_PEOpenTenders
=================

Данная аналитическая таблица хранит все коды предметов закупок и даты объявления конкурсных процедур для каждой закупающей организации.

Данная аналитическая таблица содержит следующую информацию:
 - Идентификатор закупающей организации;
 - Предмет закупки;
 - Дата объявления процедуры закупки.

Пример того, как может выглядеть таблица:

======================== ================= ======
Закупающая организация   Предмет закупки    Дата 
------------------------ ----------------- ------
Закупающая организация 1 Предмет закупки 1 Дата 1    
Закупающая организация 1 Предмет закупки 2 Дата 2
Закупающая организация 1 Предмет закупки 3 Дата 3
Закупающая организация 2 Предмет закупки 1 Дата 1
Закупающая организация 2 Предмет закупки 2 Дата 2
....                     ....              ...   
======================== ================= ======

****************************
Расчет аналитической таблицы
****************************

****************************
Источники данных для расчета
****************************

Для расчета аналитической таблицы используются следующие источники данных:

- API системы государственных закупок в OCDS формате.
- Транзакционная переменная :ref:`tv_tenderCPVList`

*************************************
Частота расчета аналитической таблицы
*************************************

Аналитическая таблица рассчитывается 1 раз в сутки.

****************
Поля для расчета
****************

- ``data.tender.status``
- ``data.tender.datePublished``
- ``data.parties.roles``
- ``data.parties.identifier.scheme``
- ``data.parties.identifier.id``

***********************
Формула расчета таблицы
***********************
1. Выбираем только процедуры проводимые одноэтапным методом, упрощенным методом или методом на понижение цены, у которых ``data.tender.status = 'active'`` или ``data.tender.status = 'complete'``. Проверку качества данных процедур не выполняем.
3. Определяем идентификатор закупающей организации (конкатенация ``data.parties.identifier.scheme`` и ``data.parties.identifier.id``) элемента ``data.parties``, у которого ``data.parties.roles = 'buyer, procuringEntity'``.
4. Из выбранных процедур берем их ``data.tender.items.classification.id``. 
5. Данные о закупающей организации, коде предмета закупки и дате объявления процедуры заносим в таблицу.
