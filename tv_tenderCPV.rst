.. _tv_tenderCPV:

============
tv_tenderCPV
============

******************************
Суть транзакционной переменной
******************************

Данная транзакционная переменная Хранит в себе общего предка до 4-го знака всех кодов закупки процедуры.

*********************
Объект характеристики
*********************

Данная переменная характеризует процедуру.

*******************************
Форма транзакционной переменной
*******************************

Данная транзакционная переменная - код категории товаров/услуг/работ, раскрытой до 4-го знака.

********************************
Расчет транзакционной переменной
********************************

Для расчета транзакционной переменной используется:

- API системы государственных закупок в OCDS формате.

****************
Поля для расчета
****************

- ``data.tender.items.classification.id``

***************
Формула расчета
***************

1. Извлекаем все значения ``data.tender.items.classification.id`` из процедуры.
2. Находим их ближайшего общего предка - самую длинную общую последовательность цифр.
3. Из найденной последовательности выбираем только первые 4 цифры, к которым добавляем "0000". Полученная последовательность и есть значением переменной для процедуры.
4. Если самая длинная общая последовательность меньше 4-х цифр - переменная принимает значение ``-1``.
